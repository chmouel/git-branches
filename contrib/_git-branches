#compdef git-branches
# Zsh completion for git-branches

_git_branches() {
    local ret=1
    local -a state state_descr args context line
    typeset -A opt_args

    _arguments -C -S \
        '(-R -d -D)-r[Browse remote branches (interactive remote selection)]' \
        '(-r -d -D)-R[Browse specific remote branches]:remote:->remotes' \
        '(-r -R -D)-d[Delete local branches (interactive multi-select)]' \
        '(-r -R -d)-D[Delete remote branches (interactive multi-select)]:remote:->remotes' \
        '(*-r *-R *-d *-D)-s[Show GitHub pushed status (branch exists on remote)]' \
        '-s-S[With -s, show all branches (no default limit)]' \
        '-n[Limit to first NUM branches]:number:' \
        '-C[Disable colors]' \
        '(*-d *-D)-l[List mode only (no checkout)]' \
        '-h[Show this help]' \
        '*--help[Show this help]' && ret=0

    case $state in
        (remotes)
            local -a remotes
            remotes=(${(f)"$(git remote 2>/dev/null)"})
            if (( $#remotes )); then
                _wanted remotes expl 'remote repository' compadd -a remotes && ret=0
            fi
            ;;
    esac

    return ret
}

_git_branches "$@"
